"use strict";!function(t){t.fn.famultibutton=function(e){function y(){n=!0,i.bg.css("color",b.onBackgroundColor),i.fg.css("color",b.onColor),o.addClass("active"),i.trigger("setOn")}function x(){n=!1,i.bg.css("color",b.offBackgroundColor),i.fg.css("color",b.offColor),o.removeClass("active"),i.trigger("setOff")}function T(t){i.fg.css("color",t)}function C(t){i.bg.css("color",t)}function $(t){i.fg.removeClass(i.fi),i.fi=t,i.fg.addClass(i.fi)}function S(t){i.bg.removeClass(i.bi),i.bi=t,i.bg.addClass(i.bi)}function k(){t("<div />").animate({width:100},{duration:700,easing:"swing",step:function(t,e){var o=(t-e.start)/(e.end-e.start);i.bg.css("color",P(b.onBackgroundColor,b.offBackgroundColor,o)),i.fg.css("color",P(b.onColor,b.offColor,o))},complete:function(){n===!0&&y()}})}function I(t){var e=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return e&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):t}function P(t,e,i){t=I(t).replace(/^\s*#|\s*$/g,""),e=I(e).replace(/^\s*#|\s*$/g,""),3==t.length&&(t=t.replace(/(.)/g,"$1$1")),3==e.length&&(e=e.replace(/(.)/g,"$1$1"));var o=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),a=parseInt(t.substr(4,2),16),r=parseInt(e.substr(0,2),16),s=parseInt(e.substr(2,2),16),f=parseInt(e.substr(4,2),16),l=r-o,u=s-n,c=f-a;return l=(l*i+o).toString(16).split(".")[0],u=(u*i+n).toString(16).split(".")[0],c=(c*i+a).toString(16).split(".")[0],1==l.length&&(l="0"+l),1==u.length&&(u="0"+u),1==c.length&&(c="0"+c),"#"+l+u+c}function D(e){var n=i.find("canvas#progress");if(e>0){0===n.length&&(n=t("<canvas>").attr({id:"progress"}).appendTo(o));var a=n[0];if(a){a.height=i.h,a.width=i.w;var r=a.width/2,s=a.height/2;if(a.getContext){var f=a.getContext("2d");f.beginPath(),f.strokeStyle=b.onColor,f.arc(r,s,r*(-.4/90*Number(b.progressWidth)+.8),-.5*Math.PI,(-.5+2*e)*Math.PI,!1),f.lineWidth=.8*r*b.progressWidth/100,f.stroke()}}}else i.find("canvas#progress").remove()}function O(){clearTimeout(r),u=c>0?u-=b.step:u+=b.step,u>b.max&&(u=b.max),u<b.min&&(u=b.min),M();var t=f[Math.abs(c)];r=setTimeout(function(){O()},500-t)}function M(){var t=a[0];if(t.height=i.h,t.width=i.w,t.getContext){var e=t.getContext("2d");e.strokeStyle=b.offBackgroundColor;for(var o=b.max,r=b.min,s=t.height-Math.round(t.height*(u-r)/(o-r)),f=0;f<t.height;f+=4)e.lineWidth=1,e.beginPath(),e.moveTo(5,f),e.lineTo(25,f),e.stroke();e.strokeStyle=n?b.onBackgroundColor:P(b.offBackgroundColor,"#ffffff",.4),e.lineWidth=3,e.beginPath(),e.moveTo(5,s),e.lineTo(25,s),e.stroke(),e.fillStyle=P(b.offBackgroundColor,"#ffffff",.4),e.font="10px sans-serif",e.fillText(u,30,t.height)}}function E(){a.css({position:"absolute","z-index":-1}),h?a.animate({left:.6*-i.w+"px"}):a.animate({left:i.w/5+"px",top:"0px"})}function L(t){t=(t||navigator.userAgent).toLowerCase();var e=t.match(/android\s([0-9\.]*)/);return e?e[1]:!1}function A(){var e,f,I,g=L(),v=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,w=g&&parseFloat(g)<5||v,T=w?"touchstart":"touchstart mousedown",C=w?"touchmove":"touchmove mousemove",$=w?"touchend":"touchend mouseup",S=w?"touchleave":"touchleave mouseout";"push"===b.mode?(o.on(T,function(i){i.stopImmediatePropagation(),f=t(window).scrollTop(),e=t(window).scrollLeft()}),o.on($,function(o){return o.preventDefault(),o.stopImmediatePropagation(),Math.abs(f-t(window).scrollTop())>3||Math.abs(e-t(window).scrollLeft())>3?void 0:(I=n,y(),"function"==typeof b.toggleOn&&b.toggleOn.call(this),n=!1,setTimeout(function(){k()},200),I===!0&&setTimeout(function(){y()},1e3),i.trigger("clicked"),!1)})):"updown"==b.mode?(o.on(T,function(t){t.preventDefault(),t.stopImmediatePropagation(),I=n,y(),"function"==typeof b.toggleOn&&b.toggleOn.call(this)}),o.on($,function(t){return t.preventDefault(),t.stopImmediatePropagation(),"function"==typeof b.toggleOff&&b.toggleOff.call(this),n=!1,setTimeout(function(){k()},200),I===!0&&setTimeout(function(){y()},1e3),i.trigger("clicked"),!1})):"toggle"==b.mode?(o.on(T,function(i){i.stopImmediatePropagation(),f=t(window).scrollTop(),e=t(window).scrollLeft()}),o.on($,function(o){return o.preventDefault(),o.stopImmediatePropagation(),Math.abs(f-t(window).scrollTop())>3||Math.abs(e-t(window).scrollLeft())>3?void 0:(n?(x(),"function"==typeof b.toggleOff&&b.toggleOff.call(this),b.timeout>0&&(m=setTimeout(function(){y()},b.timeout))):(y(),"function"==typeof b.toggleOn&&b.toggleOn.call(this),b.timeout>0&&(m=setTimeout(function(){x()},b.timeout))),i.trigger("clicked"),!1)})):"dimmer"==b.mode&&(o.on(T,function(t){t.preventDefault(),t.stopImmediatePropagation();var e=t.originalEvent;l=e.touches?e.touches[0].clientY:t.pageY,c=0,p=!0}),o.on(S,function(t){t.preventDefault(),t.stopImmediatePropagation(),h&&(h=!1,o.animate({top:0}),clearInterval(r),s=!1,E()),p=!1}),o.on($,function(t){return t.preventDefault(),t.stopImmediatePropagation(),h?(h=!1,o.animate({top:0}),clearTimeout(r),s=!1,"function"==typeof b.valueChanged&&b.valueChanged.call(this,u)):n?(x(),"function"==typeof b.toggleOff&&b.toggleOff.call(this),b.timeout>0&&(m=setTimeout(function(){y()},b.timeout))):(y(),"function"==typeof b.toggleOn&&b.toggleOn.call(this),b.timeout>0&&(m=setTimeout(function(){x()},b.timeout))),h=!1,p=!1,E(),M(),i.trigger("clicked"),!1}),o.on(C,function(t){t.preventDefault(),t.stopImmediatePropagation(),p&&(h=!0);var e=t.originalEvent;if(d=e.touches?e.touches[0].clientY:t.pageY,c=d-l,c>20&&(c=20),-20>c&&(c=-20),h){this.style.top=c+"px";var i=a[0];i.style.top=-c+"px",s||(E(),O(),s=!0)}}))}if(this.length>1)return this.each(function(){t(this).famultibutton(e)}),this;var o,a,r,m,i=this,n=!1,s=!1,f=[0,10,40,80,120,140,150,160,180,200,240,260,280,300,320,420,430,440,450,460,470],l=0,u=0,c=0,g=0,d=0,h=!1,p=!1,v={backgroundIcon:"fa-circle",classes:["fa-2x"],icon:"fa-power-off",offColor:"#2A2A2A",offBackgroundColor:"#505050",onColor:"#2A2A2A",onBackgroundColor:"#aa6900",mode:"toggle",toggleOn:null,toggleOff:null,valueChanged:null,progressWidth:15,timeout:0,max:100,min:0,step:1},b=t.extend({},v,e),w=function(){b=t.extend({},b,i.data());var e=i.html()!==i.text()?i.children().detach():jQuery("<div>",{}).text(i.text());if("none"!==b.onColor&&"none"!==b.offColor&&e.attr("id","fg"),e.addClass("fa-stack-1x"),i.html(""),i.bi=b.backgroundIcon,i.fi=b.icon,o=t("<div/>",{"class":"famultibutton"}),o.addClass("fa-stack"),i.bg=jQuery("<i/>",{id:"bg","class":"fa fa-stack-2x"}).addClass(i.bi),i.fg=jQuery("<i/>",{id:"fg","class":"fa fa-stack-1x"}).addClass(i.fi),b.classes&&b.classes.length>0)for(var n=0,r=b.classes.length;r>n;n++)o.addClass(b.classes[n]);return i.bg.appendTo(o),i.fg.appendTo(o),e.appendTo(o),o.appendTo(i),i.o=b,i.w=o.width(),i.h=o.height(),x(),"dimmer"==b.mode&&(a=t("<canvas>").attr({id:"scale",height:i.h+"px",width:i.w+"px"}).appendTo(o),g=parseInt(a.offset().top)-parseInt(o.offset().top),M(),E()),i.data("famultibutton",i),A(),i};return this.setOn=function(){clearTimeout(m),y()},this.setOff=function(){clearTimeout(m),x()},this.getState=function(){return n},this.getValue=function(){return u},this.setDimValue=function(t){u=t,M()},this.setProgressValue=function(t){D(t)},this.setForegroundColor=function(t){T(t)},this.setBackgroundColor=function(t){C(t)},this.setForegroundIcon=function(t){$(t)},this.setBackgroundIcon=function(t){S(t)},w()}}(jQuery);