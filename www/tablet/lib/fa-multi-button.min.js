/*!jQuery FA multi button*/
(function(a){a.fn.famultibutton=function(e){if(this.length>1){this.each(function(){a(this).famultibutton(e)});return this}var C=this;var j=false;var h;var x;var c=false;var r=[0,10,40,80,120,140,150,160,180,200,240,260,280,300,320,420,430,440,450,460,470];var z=0;var d=0;var p=0;var m=0;var s=0;var A=false;var o=false;var E={backgroundIcon:"fa-circle",classes:["fa-2x"],icon:"fa-power-off",offColor:"#2A2A2A",offBackgroundColor:"#505050",onColor:"#2A2A2A",onBackgroundColor:"#aa6900",mode:"toggle",toggleOn:null,toggleOff:null,valueChanged:null,progressWidth:15,max:100,min:0,step:1};var g=a.extend({},E,e);var i=function(){g=a.extend({},g,C.data());C.addClass("fa-stack");jQuery("<i/>",{id:"bg","class":"fa fa-stack-2x"}).addClass(g.backgroundIcon).appendTo(C);jQuery("<i/>",{id:"fg","class":"fa fa-stack-1x"}).addClass(g.icon).appendTo(C);if(g.classes&&g.classes.length>0){for(var I=0;I<g.classes.length;I++){C.addClass(g.classes[I])}}H();if(g.mode=="dimmer"){a("<canvas>").attr({id:"scale"}).appendTo(C);h=C.find("canvas#scale");h.css({height:C.innerHeight()+4});m=parseInt(h.offset().top)-parseInt(C.offset().top);b();l()}C.o=g;C.data("famultibutton",C);return C};function t(){j=true;C.children().filter("#bg").css("color",g.onBackgroundColor);C.children().filter("#fg").css("color",g.onColor);C.trigger("setOn")}function H(){j=false;C.children().filter("#bg").css("color",g.offBackgroundColor);C.children().filter("#fg").css("color",g.offColor);C.trigger("setOff")}function k(){if(j){j=false;a("<div />").animate({width:100},{duration:700,easing:"swing",step:function(J,K){var I=(J-K.start)/(K.end-K.start);C.children().filter("#bg").css("color",getGradientColor(g.onBackgroundColor,g.offBackgroundColor,I));C.children().filter("#fg").css("color",getGradientColor(g.onColor,g.offColor,I))}})}}function n(L){var K=C.find("canvas#progress");if(L>0){if(K.length==0){K=a("<canvas>").attr({id:"progress"}).appendTo(C)}var J=K[0];if(J){J.height=C.height();J.width=C.width();var I=J.width/2;var N=J.height/2;if(J.getContext){var M=J.getContext("2d");M.beginPath();M.strokeStyle=g.onColor;M.arc(I,N,I*((-0.4/90)*Number(g.progressWidth)+0.8),-0.5*Math.PI,(-0.5+L*2)*Math.PI,false);M.lineWidth=I*0.8*g.progressWidth/100;M.stroke()}}}else{C.find("canvas#progress").remove()}}rgbToHex=function(I){var J=I.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return(J&&J.length===4)?"#"+("0"+parseInt(J[1],10).toString(16)).slice(-2)+("0"+parseInt(J[2],10).toString(16)).slice(-2)+("0"+parseInt(J[3],10).toString(16)).slice(-2):I};getGradientColor=function(M,P,Q){M=rgbToHex(M).replace(/^\s*#|\s*$/g,"");P=rgbToHex(P).replace(/^\s*#|\s*$/g,"");if(M.length==3){M=M.replace(/(.)/g,"$1$1")}if(P.length==3){P=P.replace(/(.)/g,"$1$1")}var I=parseInt(M.substr(0,2),16),L=parseInt(M.substr(2,2),16),J=parseInt(M.substr(4,2),16);var K=parseInt(P.substr(0,2),16),O=parseInt(P.substr(2,2),16),R=parseInt(P.substr(4,2),16);var S=K-I;var T=O-L;var N=R-J;S=((S*Q)+I).toString(16).split(".")[0];T=((T*Q)+L).toString(16).split(".")[0];N=((N*Q)+J).toString(16).split(".")[0];if(S.length==1){S="0"+S}if(T.length==1){T="0"+T}if(N.length==1){N="0"+N}return"#"+S+T+N};function f(){clearTimeout(x);d=(p>0)?d-=g.step:d+=g.step;if(d>g.max){d=g.max}if(d<g.min){d=g.min}b();var I=(r[Math.abs(p)]);x=setTimeout(function(){f()},500-I)}function b(){var K=h[0];K.height=C.innerHeight();K.width=C.innerWidth();if(K.getContext){var N=K.getContext("2d");N.strokeStyle=g.offBackgroundColor;var I=g.max;var M=g.min;var J=K.height-Math.round(K.height*(d-M)/(I-M));for(var L=0;L<K.height;L+=4){N.lineWidth=1;N.beginPath();N.moveTo(5,L);N.lineTo(25,L);N.stroke()}N.strokeStyle=(j)?g.onBackgroundColor:getGradientColor(g.offBackgroundColor,"#ffffff",0.4);N.lineWidth=3;N.beginPath();N.moveTo(5,J);N.lineTo(25,J);N.stroke();N.fillStyle=getGradientColor(g.offBackgroundColor,"#ffffff",0.4);N.font="10px sans-serif";N.fillText(d,30,K.height)}}function l(){h.css({position:"absolute","z-index":-1});if(A){h.animate({left:-C.innerWidth()*0.6+"px"})}else{h.animate({left:C.innerWidth()/5+"px",top:m})}}function G(J){J=(J||navigator.userAgent).toLowerCase();var I=J.match(/android\s([0-9\.]*)/);return I?I[1]:false}var v,u;var F=G();var w=(F&&parseFloat(F)<4.3);var B=((w)?"touchstart":"touchstart mousedown");var D=((w)?"touchmove":"touchmove mousemove");var q=((w)?"touchend":"touchend mouseup");var y=((w)?"touchleave":"touchleave mouseout");if(g.mode=="push"){this.bind(B,function(I){u=a(window).scrollTop();v=a(window).scrollLeft()}).bind(q,function(I){if(Math.abs(u-a(window).scrollTop())>3||(Math.abs(v-a(window).scrollLeft())>3)){return}t();if(typeof g.toggleOn==="function"){g.toggleOn.call(this)}setTimeout(function(){k()},200)})}else{if(g.mode=="toggle"){this.on(B,function(I){u=a(window).scrollTop();v=a(window).scrollLeft();I.preventDefault()});this.on(q,function(I){I.preventDefault();I.stopPropagation();if(Math.abs(u-a(window).scrollTop())>3||(Math.abs(v-a(window).scrollLeft())>3)){return}if(j){H();if(typeof g.toggleOff==="function"){g.toggleOff.call(this)}}else{t();if(typeof g.toggleOn==="function"){g.toggleOn.call(this)}}I.preventDefault();I.stopPropagation()})}else{if(g.mode=="dimmer"){this.bind(B,function(J){var I=J.originalEvent;z=I.touches?I.touches[0].clientY:J.pageY;p=0;o=true;J.preventDefault()});this.bind(y,function(I){if(A){A=false;C.animate({top:0});clearInterval(x);c=false;l()}o=false;I.preventDefault()});this.bind(q,function(I){if(A){A=false;C.animate({top:0});clearTimeout(x);c=false;if(typeof g.valueChanged==="function"){g.valueChanged.call(this,d)}}else{if(j){H();if(typeof g.toggleOff==="function"){g.toggleOff.call(this)}}else{t();if(typeof g.toggleOn==="function"){g.toggleOn.call(this)}}}A=false;o=false;l();b();I.preventDefault()});this.bind(D,function(J){if(o){A=true}var I=J.originalEvent;s=I.touches?I.touches[0].clientY:J.pageY;p=s-z;if(p>20){p=20}if(p<-20){p=-20}if(A){this.style.top=p+"px";if(!c){l();f();c=true}h.css({top:-p+"px"})}J.preventDefault()})}}}this.setOn=function(){t()};this.setOff=function(){H()};this.getState=function(){return j};this.getValue=function(){return d};this.setDimValue=function(I){d=I;b()};this.setProgressValue=function(I){n(I)};return i()}})(jQuery);