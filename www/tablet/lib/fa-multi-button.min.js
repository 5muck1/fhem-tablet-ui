/*!jQuery FA multi button*/
(function(a){a.fn.famultibutton=function(e){if(this.length>1){this.each(function(){a(this).famultibutton(e)});return this}var z=this;var j=false;var h;var u;var c=false;var r=[0,10,40,80,120,140,150,160,180,200,240,260,280,300,320,420,430,440,450,460,470];var w=0;var d=0;var p=0;var m=0;var s=0;var x=false;var o=false;var B={backgroundIcon:"fa-circle",classes:["fa-2x"],icon:"fa-power-off",offColor:"#2A2A2A",offBackgroundColor:"#505050",onColor:"#2A2A2A",onBackgroundColor:"#aa6900",mode:"toggle",toggleOn:null,toggleOff:null,valueChanged:null};var g=a.extend({},B,e);var i=function(){g=a.extend({},g,z.data());z.addClass("fa-stack");jQuery("<i/>",{id:"bg","class":"fa fa-stack-2x"}).addClass(g.backgroundIcon).appendTo(z);jQuery("<i/>",{id:"fg","class":"fa fa-stack-1x"}).addClass(g.icon).appendTo(z);if(g.classes&&g.classes.length>0){for(var D=0;D<g.classes.length;D++){z.addClass(g.classes[D])}}C();if(g.mode=="dimmer"){a("<canvas>").attr({id:"scale"}).appendTo(z);h=z.find("canvas#scale");h.css({height:z.innerHeight()+4});m=parseInt(h.offset().top)-parseInt(z.offset().top);b();l()}z.data("famultibutton",z);return z};function t(){j=true;z.children().filter("#bg").css("color",g.onBackgroundColor);z.children().filter("#fg").css("color",g.onColor)}function C(){j=false;z.children().filter("#bg").css("color",g.offBackgroundColor);z.children().filter("#fg").css("color",g.offColor)}function k(){if(j){j=false;a("<div />").animate({width:100},{duration:700,easing:"swing",step:function(E,F){var D=(E-F.start)/(F.end-F.start);z.children().filter("#bg").css("color",getGradientColor(g.onBackgroundColor,g.offBackgroundColor,D));z.children().filter("#fg").css("color",getGradientColor(g.onColor,g.offColor,D))}})}}function n(G){var F=z.find("canvas#progress");if(G>0){if(F.length==0){F=a("<canvas>").attr({id:"progress"}).appendTo(z)}var E=F[0];if(E){E.height=z.height();E.width=z.width();var D=E.width/2;var I=E.height/2;if(E.getContext){var H=E.getContext("2d");H.beginPath();H.strokeStyle=g.onColor;H.arc(D,I,D*0.8,-0.5*Math.PI,(-0.5+G*2)*Math.PI,false);H.lineWidth=4;H.stroke()}}}else{z.find("canvas#progress").remove()}}rgbToHex=function(D){var E=D.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return(E&&E.length===4)?"#"+("0"+parseInt(E[1],10).toString(16)).slice(-2)+("0"+parseInt(E[2],10).toString(16)).slice(-2)+("0"+parseInt(E[3],10).toString(16)).slice(-2):D};getGradientColor=function(H,K,L){H=rgbToHex(H).replace(/^\s*#|\s*$/g,"");K=rgbToHex(K).replace(/^\s*#|\s*$/g,"");if(H.length==3){H=H.replace(/(.)/g,"$1$1")}if(K.length==3){K=K.replace(/(.)/g,"$1$1")}var D=parseInt(H.substr(0,2),16),G=parseInt(H.substr(2,2),16),E=parseInt(H.substr(4,2),16);var F=parseInt(K.substr(0,2),16),J=parseInt(K.substr(2,2),16),M=parseInt(K.substr(4,2),16);var N=F-D;var O=J-G;var I=M-E;N=((N*L)+D).toString(16).split(".")[0];O=((O*L)+G).toString(16).split(".")[0];I=((I*L)+E).toString(16).split(".")[0];if(N.length==1){N="0"+N}if(O.length==1){O="0"+O}if(I.length==1){I="0"+I}return"#"+N+O+I};function f(){clearTimeout(u);d=(p>0)?d-=1:d+=1;if(d>100){d=100}if(d<0){d=0}b();var D=(r[Math.abs(p)]);u=setTimeout(function(){f()},500-D)}function b(){var E=h[0];E.height=z.innerHeight();E.width=z.innerWidth();if(E.getContext){var G=E.getContext("2d");G.strokeStyle=g.offBackgroundColor;var D=E.height-Math.round(E.height*d/100);for(var F=0;F<E.height;F+=4){G.lineWidth=1;G.beginPath();G.moveTo(5,F);G.lineTo(25,F);G.stroke()}G.strokeStyle=(j)?g.onBackgroundColor:getGradientColor(g.offBackgroundColor,"#ffffff",0.4);G.lineWidth=3;G.beginPath();G.moveTo(5,D);G.lineTo(25,D);G.stroke();G.fillStyle=getGradientColor(g.offBackgroundColor,"#ffffff",0.4);G.font="10px sans-serif";G.fillText(d,30,E.height)}}function l(){h.css({position:"absolute","z-index":-1});if(x){h.animate({left:-z.innerWidth()*0.6+"px"})}else{h.animate({left:z.innerWidth()/5+"px",top:m})}}if(g.mode=="push"){var y=((document.ontouchstart!==null)?"mousedown":"touchstart");var q=((document.ontouchend!==null)?"mouseup":"touchend");var v=((document.ontouchleave!==null)?"mouseout":"touchleave");this.bind(y,function(D){t();if(typeof g.toggleOn==="function"){g.toggleOn.call(this)}});this.bind(q,function(D){k()});this.bind(v,function(D){k()})}else{if(g.mode=="toggle"){var y=((document.ontouchstart!==null)?"click":"touchstart");this.bind(y,function(D){if(j){C();if(typeof g.toggleOff==="function"){g.toggleOff.call(this)}}else{t();if(typeof g.toggleOn==="function"){g.toggleOn.call(this)}}D.preventDefault()})}else{if(g.mode=="dimmer"){var y=((document.ontouchstart!==null)?"mousedown":"touchstart");var A=((document.ontouchmove!==null)?"mousemove":"touchmove");var q=((document.ontouchend!==null)?"mouseup":"touchend");var v=((document.ontouchleave!==null)?"mouseout":"touchleave");this.bind(y,function(E){var D=E.originalEvent;w=D.touches?D.touches[0].clientY:E.pageY;p=0;o=true;E.preventDefault()});this.bind(v,function(D){if(x){x=false;z.animate({top:0});clearInterval(u);c=false;l()}o=false;D.preventDefault()});this.bind(q,function(D){if(x){x=false;z.animate({top:0});clearTimeout(u);c=false;if(typeof g.valueChanged==="function"){g.valueChanged.call(this,d)}}else{if(j){C();if(typeof g.toggleOff==="function"){g.toggleOff.call(this)}}else{t();if(typeof g.toggleOn==="function"){g.toggleOn.call(this)}}}x=false;o=false;l();b();D.preventDefault()});this.bind(A,function(E){if(o){x=true}var D=E.originalEvent;s=D.touches?D.touches[0].clientY:E.pageY;p=s-w;if(p>20){p=20}if(p<-20){p=-20}if(x){this.style.top=p+"px";if(!c){l();f();c=true}h.css({top:-p+"px"})}E.preventDefault()})}}}this.setOn=function(){t()};this.setOff=function(){C()};this.getState=function(){return j};this.getValue=function(){return d};this.setDimValue=function(D){d=D;b()};this.setProgressValue=function(D){n(D)};return i()}})(jQuery);