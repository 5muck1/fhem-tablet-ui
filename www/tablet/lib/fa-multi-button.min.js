/*!jQuery FA multi button*/
(function(a){a.fn.famultibutton=function(e){if(this.length>1){this.each(function(){a(this).famultibutton(e)});return this}var D=this;var k=false;var h;var y;var c=false;var t=[0,10,40,80,120,140,150,160,180,200,240,260,280,300,320,420,430,440,450,460,470];var A=0;var d=0;var q=0;var n=0;var u=0;var B=false;var p=false;var F={backgroundIcon:"fa-circle",classes:["fa-2x"],icon:"fa-power-off",offColor:"#2A2A2A",offBackgroundColor:"#505050",onColor:"#2A2A2A",onBackgroundColor:"#aa6900",mode:"toggle",toggleOn:null,toggleOff:null,valueChanged:null,progressWidth:15,max:100,min:0,step:1};var g=a.extend({},F,e);var i=function(){g=a.extend({},g,D.data());D.addClass("fa-stack");jQuery("<i/>",{id:"bg","class":"fa fa-stack-2x"}).addClass(g.backgroundIcon).appendTo(D);jQuery("<i/>",{id:"fg","class":"fa fa-stack-1x"}).addClass(g.icon).appendTo(D);if(g.classes&&g.classes.length>0){for(var H=0;H<g.classes.length;H++){D.addClass(g.classes[H])}}G();if(g.mode=="dimmer"){a("<canvas>").attr({id:"scale"}).appendTo(D);h=D.find("canvas#scale");h.css({height:D.innerHeight()+4});n=parseInt(h.offset().top)-parseInt(D.offset().top);b();m()}D.o=g;D.data("famultibutton",D);return D};function v(){k=true;D.children().filter("#bg").css("color",g.onBackgroundColor);D.children().filter("#fg").css("color",g.onColor);D.trigger("setOn")}function G(){k=false;D.children().filter("#bg").css("color",g.offBackgroundColor);D.children().filter("#fg").css("color",g.offColor);D.trigger("setOff")}function l(){if(k){k=false;a("<div />").animate({width:100},{duration:700,easing:"swing",step:function(I,J){var H=(I-J.start)/(J.end-J.start);D.children().filter("#bg").css("color",getGradientColor(g.onBackgroundColor,g.offBackgroundColor,H));D.children().filter("#fg").css("color",getGradientColor(g.onColor,g.offColor,H))}})}}function o(K){var J=D.find("canvas#progress");if(K>0){if(J.length==0){J=a("<canvas>").attr({id:"progress"}).appendTo(D)}var I=J[0];if(I){I.height=D.height();I.width=D.width();var H=I.width/2;var M=I.height/2;if(I.getContext){var L=I.getContext("2d");L.beginPath();L.strokeStyle=g.onColor;L.arc(H,M,H*((-0.4/90)*Number(g.progressWidth)+0.8),-0.5*Math.PI,(-0.5+K*2)*Math.PI,false);L.lineWidth=H*0.8*g.progressWidth/100;L.stroke()}}}else{D.find("canvas#progress").remove()}}rgbToHex=function(H){var I=H.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return(I&&I.length===4)?"#"+("0"+parseInt(I[1],10).toString(16)).slice(-2)+("0"+parseInt(I[2],10).toString(16)).slice(-2)+("0"+parseInt(I[3],10).toString(16)).slice(-2):H};getGradientColor=function(L,O,P){L=rgbToHex(L).replace(/^\s*#|\s*$/g,"");O=rgbToHex(O).replace(/^\s*#|\s*$/g,"");if(L.length==3){L=L.replace(/(.)/g,"$1$1")}if(O.length==3){O=O.replace(/(.)/g,"$1$1")}var H=parseInt(L.substr(0,2),16),K=parseInt(L.substr(2,2),16),I=parseInt(L.substr(4,2),16);var J=parseInt(O.substr(0,2),16),N=parseInt(O.substr(2,2),16),Q=parseInt(O.substr(4,2),16);var R=J-H;var S=N-K;var M=Q-I;R=((R*P)+H).toString(16).split(".")[0];S=((S*P)+K).toString(16).split(".")[0];M=((M*P)+I).toString(16).split(".")[0];if(R.length==1){R="0"+R}if(S.length==1){S="0"+S}if(M.length==1){M="0"+M}return"#"+R+S+M};function f(){clearTimeout(y);d=(q>0)?d-=g.step:d+=g.step;if(d>g.max){d=g.max}if(d<g.min){d=g.min}b();var H=(t[Math.abs(q)]);y=setTimeout(function(){f()},500-H)}function b(){var J=h[0];J.height=D.innerHeight();J.width=D.innerWidth();if(J.getContext){var M=J.getContext("2d");M.strokeStyle=g.offBackgroundColor;var H=g.max;var L=g.min;var I=J.height-Math.round(J.height*(d-L)/(H-L));for(var K=0;K<J.height;K+=4){M.lineWidth=1;M.beginPath();M.moveTo(5,K);M.lineTo(25,K);M.stroke()}M.strokeStyle=(k)?g.onBackgroundColor:getGradientColor(g.offBackgroundColor,"#ffffff",0.4);M.lineWidth=3;M.beginPath();M.moveTo(5,I);M.lineTo(25,I);M.stroke();M.fillStyle=getGradientColor(g.offBackgroundColor,"#ffffff",0.4);M.font="10px sans-serif";M.fillText(d,30,J.height)}}function m(){h.css({position:"absolute","z-index":-1});if(B){h.animate({left:-D.innerWidth()*0.6+"px"})}else{h.animate({left:D.innerWidth()/5+"px",top:n})}}var x,w;var C=((document.ontouchstart!==null)?"mousedown":"touchstart");var E=((document.ontouchmove!==null)?"mousemove":"touchmove");var r=((document.ontouchend!==null)?"mouseup":"touchend");var z=((document.ontouchleave!==null)?"mouseout":"touchleave");if(g.mode=="push"){function s(H){w=a(window).scrollTop();x=a(window).scrollLeft()}function j(H){if(Math.abs(w-a(window).scrollTop())>3||(Math.abs(x-a(window).scrollLeft())>3)){return}v();if(typeof g.toggleOn==="function"){g.toggleOn.call(this)}setTimeout(function(){l()},200)}this.bind("touchstart",function(H){H.preventDefault();s()});this.bind("mousedown",function(H){s()});this.bind("touchend",function(H){H.preventDefault();j(H)});this.bind("mouseup",function(H){j(H)})}else{if(g.mode=="toggle"){function s(H){w=a(window).scrollTop();x=a(window).scrollLeft()}function j(H){if(Math.abs(w-a(window).scrollTop())>3||(Math.abs(x-a(window).scrollLeft())>3)){return}if(k){G();if(typeof g.toggleOff==="function"){g.toggleOff.call(this)}}else{v();if(typeof g.toggleOn==="function"){g.toggleOn.call(this)}}}this.bind("touchstart",function(H){H.preventDefault();s()});this.bind("mousedown",function(H){s()});this.bind("touchend",function(H){H.preventDefault();j(H)});this.bind("mouseup",function(H){j(H)})}else{if(g.mode=="dimmer"){this.bind("touchstart mousedown",function(I){var H=I.originalEvent;A=H.touches?H.touches[0].clientY:I.pageY;q=0;p=true;I.preventDefault()});this.bind("touchleave mouseout",function(H){if(B){B=false;D.animate({top:0});clearInterval(y);c=false;m()}p=false;H.preventDefault()});this.bind("touchend mouseup",function(H){if(B){B=false;D.animate({top:0});clearTimeout(y);c=false;if(typeof g.valueChanged==="function"){g.valueChanged.call(this,d)}}else{if(k){G();if(typeof g.toggleOff==="function"){g.toggleOff.call(this)}}else{v();if(typeof g.toggleOn==="function"){g.toggleOn.call(this)}}}B=false;p=false;m();b();H.preventDefault()});this.bind("touchmove mousemove",function(I){if(p){B=true}var H=I.originalEvent;u=H.touches?H.touches[0].clientY:I.pageY;q=u-A;if(q>20){q=20}if(q<-20){q=-20}if(B){this.style.top=q+"px";if(!c){m();f();c=true}h.css({top:-q+"px"})}I.preventDefault()})}}}this.setOn=function(){v()};this.setOff=function(){G()};this.getState=function(){return k};this.getValue=function(){return d};this.setDimValue=function(H){d=H;b()};this.setProgressValue=function(H){o(H)};return i()}})(jQuery);